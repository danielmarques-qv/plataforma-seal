# üéñÔ∏è PROJETO SEAL: ESPECIFICA√á√ïES T√âCNICAS COMPLETAS

## 1. ARQUITETURA E STACK
- **Backend:** Python 3.11+ (Poetry) | Django 5 + Django Ninja (API REST)
- **Frontend:** React + Vite + TypeScript | Tailwind CSS | Zustand (State) | TanStack Query
- **Banco de Dados:** Supabase (PostgreSQL) - **Schema: `seal`**
- **Autentica√ß√£o:** Supabase Auth (Valida√ß√£o de JWT no Backend)

---

## 2. DICION√ÅRIO DE DADOS (SCHEMA `seal`)

### 2.1. Tabela: `profiles`
Centraliza o estado do usu√°rio e gamifica√ß√£o.
- `id` (UUID, PK): Refer√™ncia ao auth.users.
- `onboarding_step` (Int): 0 (Cadastro), 1 (Kickoff), 2 (Contrato), 3 (Operacional).
- `full_name`, `phone`, `pix_key` (Text): Dados de pagamento e contato.
- `financial_goal` (Numeric): Meta mensal (Input de Sonhos).
- `current_commission` (Numeric): Soma de comiss√µes ganhas.
- `families_saved_count` (Int): Soma de leads em status 'RESGATE'.
- `heptagram_scores` (JSONB): Notas do quizz (ex: `{"tecnica": 8, "venda": 5...}`).
- `dream_description` (Text): Texto sobre os objetivos pessoais.

### 2.2. Tabela: `crm_leads`
- `id` (BigInt, PK).
- `strategist_id` (FK -> profiles.id).
- `status` (Text): 'RADAR', 'COMBATE', 'EXTRA√á√ÉO', 'RESGATE'.
- `name`, `phone`, `email`, `potential_value`.

### 2.3. Tabela: `training_modules`
- `id` (BigInt, PK).
- `title`, `video_url`, `order_index`.
- `required_step` (Int): Step m√≠nimo para visualizar.

### 2.4. Outras Tabelas
- `commissions`: `lead_id`, `amount`, `status` ('PENDING', 'PAID').
- `resources`: `title`, `category`, `file_url` (Scripts e Playbooks).

---

## 3. IDENTIDADE VISUAL (TACTICAL UI)
- **Cores:** - Fundo: `#1D1D1B` | Surface: `#23262B`
  - Prim√°ria: `#785942` (Terra) | Destaque: `#4A3728` (Caf√©)
  - Texto: `#F2EFE9` (Creme) | Detalhes: `#C4A88E` (Areia)
- **Tipografia:** `Archivo Black` (Headers/Hype) | `Roboto` (Textos).
- **Estilo:** Bordas retas (rounded: 0px), √≠cones t√°ticos (Lucide-React).

---

## 4. JORNADA DO USU√ÅRIO E TELAS (UX FLOW)

### FASE 0: O RECRUTA (onboarding_step = 0)
**Tela: Cadastro Inicial & Sonhos**
- Formul√°rio para `full_name`, `phone` e `pix_key`.
- Se√ß√£o "Input de Sonhos": Slider para `financial_goal` e campo de texto para `dream_description`.
- **Quizz Heptagrama:** 7 perguntas de 1 a 10. O resultado gera um Radar Chart imediato.
- *A√ß√£o:* Ao salvar, `onboarding_step` vai para 1.

### FASE 1: BRIEFING (onboarding_step = 1)
**Tela: Onboarding - Kickoff**
- Bot√£o "AGENDAR REUNI√ÉO DE KICKOFF" (Link Externo).
- Card de status: "Aguardando confirma√ß√£o de presen√ßa".
- *A√ß√£o:* Ap√≥s confirma√ß√£o, `onboarding_step` vai para 2.

### FASE 2: ENGAJAMENTO (onboarding_step = 2)
**Tela: Onboarding - Contrato**
- Visualiza√ß√£o dos Primeiros V√≠deos de Treinamento (liberados para step 2).
- Bot√£o "ASSINAR CONTRATO DE ESTRATEGISTA" (Link DocuSign).
- *A√ß√£o:* Ap√≥s assinatura, `onboarding_step` vai para 3.

### FASE 3: OPERACIONAL (onboarding_step = 3) - ACESSO TOTAL
**Tela 1: War Room (Dashboard)**
- KPI 1: "FAM√çLIAS SALVAS PELO SEAL [NOME]" (Contador gigante).
- KPI 2: "EVOLU√á√ÉO DE REMUNERA√á√ÉO" (Barra de progresso: Comiss√£o Atual vs. Meta de Sonho).
- Carrossel de "Miss√µes Atuais" (V√≠deos pendentes).

**Tela 2: Frontline (CRM Kanban)**
- 4 Colunas: **RADAR** (Frio), **COMBATE** (Reuni√£o), **EXTRA√á√ÉO** (Proposta), **RESGATE** (Venda).
- Drag & Drop para mover leads.
- Bot√£o "+" para novo Lead (Nome/Telefone/Valor).

**Tela 3: Arsenal (Treinamentos & Scripts)**
- Lista de v√≠deos filtrados por ordem.
- Aba de "Scripts": Links para download de documentos de apoio.

**Tela 4: Regras de Comissionamento**
- Texto explicativo est√°tico + Tabela de extrato de comiss√µes pendentes.

---

## 5. REGRAS DE NEG√ìCIO (BACKEND)
1. **Seguran√ßa (RLS):** Usu√°rios s√≥ acessam leads onde `strategist_id == auth.uid()`.
2. **Cadeados:** Endpoints de CRM e Resources devem retornar `403 Forbidden` se `onboarding_step < 3`.
3. **C√°lculo de Hype:** O contador de fam√≠lias salvas deve ser atualizado via Trigger no DB ou l√≥gica no `POST/PATCH` do CRM.